var MasterLayout=function(){function n(n,t){this.UIRenderer=n,this.Debugger=t,this._layoutControls=[],this._visualControls=[],this._appbarControl=new AppBarControl(n,t,"divAppBar"),this._toolbarControl=new ToolBarControl(n,t,"divToolBar"),this._appbarUsersControl=new AppBarUsersControl(n,t,"divAppBarUsers"),this._appbarProjectsControl=new AppBarProjectsControl(n,t,"divAppBarProjects"),this._loadingControl=new LoadingControl(n,t,"divLoading"),this.ActHost=this.UIRenderer.LoadDiv("divActHost"),this._notifcationCenterControl=new NotificationCenterControl(n,t,"divNotifications",null),this._notifcationCenterControl.UpdateFromLayout($(window).width()-280)}return n.prototype.AddLayoutControl=function(n){this._layoutControls.push(n)},n.prototype.AddVisualControl=function(n){this._visualControls.push(n)},n.prototype.Start=function(){this.Debugger.Log("MasterLayout:Start")},n.prototype.Stop=function(){this.Debugger.Log("MasterLayout:Stop")},n.prototype.Show=function(appBarItemsData,toolBarItemsData,settingsData){this.Debugger.Log("MasterLayout:Show"),this._appBarItemsData=appBarItemsData,this._toolBarItemsData=toolBarItemsData,this._settingsData=eval(settingsData),this._InitializeToolbar(),this._InitializeAppbar(),this._InitializeAppbarUsers(),this._InitializeAppbarProjects()},n.prototype.Hide=function(){},n.prototype.Unload=function(){this._appbarControl.Unload(),this._toolbarControl.Unload(),this._loadingControl.Unload(),this._notifcationCenterControl.Unload(),this._appbarUsersControl.Unload(),this._appbarProjectsControl.Unload(),this.ActHost.remove()},n.prototype.ShowLoading=function(n){this.Debugger.Log("MasterLayout:ShowLoading"),this._loadingControl.Show(n)},n.prototype.HideLoading=function(){this.Debugger.Log("MasterLayout:HideLoading"),this._loadingControl.Hide()},n.prototype.ShowAppBar=function(){this.Debugger.Log("MasterLayout:ShowAppBar"),this._appbarUsersControl.IsShowing&&this._appbarUsersControl.Hide(),this._appbarProjectsControl.IsShowing&&this._appbarProjectsControl.Hide(),this._appbarControl.IsShowing?this._appbarControl.Hide():this._appbarControl.Show(null)},n.prototype.HideAppBar=function(){this.Debugger.Log("MasterLayout:HideAppBar"),this._appbarControl.Hide()},n.prototype.ShowToolBar=function(n,t,i,r){this.Debugger.Log("MasterLayout:ShowToolBar"),this._toolbarControl.InitConfig(n,t,i,r),this._toolbarControl.Show(null)},n.prototype.HideToolBar=function(){this.Debugger.Log("MasterLayout:HideToolBar"),this._toolbarControl.Hide()},n.prototype.RaiseNotification=function(n,t,i){this.Debugger.Log("MasterLayout:RaisNotification"),this._notifcationCenterControl.Show(n,t,i)},n.prototype.CloseNotification=function(n){this.Debugger.Log("MasterLayout:CloseNotification"),this._notifcationCenterControl.UnloadItem(n)},n.prototype.HideNotifications=function(){this.Debugger.Log("MasterLayout:Notifications"),this._notifcationCenterControl.Hide()},n.prototype.ShowAppBarUsers=function(){this.Debugger.Log("MasterLayout:ShowAppBarUsers"),this._appbarControl.IsShowing&&this._appbarControl.Hide(),this._appbarProjectsControl.IsShowing&&this._appbarProjectsControl.Hide(),this._appbarUsersControl.IsShowing?this._appbarUsersControl.Hide():this._appbarUsersControl.Show(null)},n.prototype.HideAppBarUsers=function(){this.Debugger.Log("MasterLayout:HideAppBarUsers"),this._appbarUsersControl.Hide()},n.prototype.ShowAppBarProjects=function(){this.Debugger.Log("MasterLayout:ShowAppBarProjects"),this._appbarControl.IsShowing&&this._appbarControl.Hide(),this._appbarUsersControl.IsShowing&&this._appbarUsersControl.Hide(),this._appbarProjectsControl.IsShowing?this._appbarProjectsControl.Hide():this._appbarProjectsControl.Show(null)},n.prototype.HideAppBarProjects=function(){this.Debugger.Log("MasterLayout:HideAppBarProjects"),this._appbarProjectsControl.Hide()},n.prototype._ToolbarClicked=function(n){if(n.parent.Debugger.Log("MasterLayout:_ToolbarClicked "+n.data),n.data!=null){var t=n.data.split("|");n.parent._ProcessActionSceneAct(t[0],t[1],n)}},n.prototype._AppBarClicked=function(n){if(n.parent.Debugger.Log("MasterLayout:_AppBarClicked "+n.data),n.data!=null){var t=n.data.split("|");n.parent._ProcessActionSceneAct(t[0],t[1],n)}},n.prototype._ProcessActionSceneAct=function(n,t,i){i.parent.Debugger.Log("MasterLayout:_ProcessActionSceneAct p1="+n+"  p2="+t);switch(n){case"scene":_bootup.SceneManager.NavigateToScene(t);break;case"act":_bootup.SceneManager.NavigateToAct(t);break;case"action":switch(t){case"close appbar":_bootup.SceneManager.CurrentScene.HideAppBar();break;case"close appbar users":_bootup.SceneManager.CurrentScene.HideAppBarUsers();break;case"close appbar projects":_bootup.SceneManager.CurrentScene.HideAppBarProjects();break;case"open appbar":_bootup.SceneManager.CurrentScene.ShowAppBar();break;case"open appbar users":_bootup.SceneManager.CurrentScene.ShowAppBarUsers();break;case"open appbar projects":_bootup.SceneManager.CurrentScene.ShowAppBarProjects();break;case"execute":_bootup.SceneManager.CurrentScene.ExecuteAction(i.data)}}},n.prototype._AppBarUsersClicked=function(n){n.parent.Debugger.Log("MasterLayout:_AppBarUsersClicked "+n.data)},n.prototype._AppBarProjectsClicked=function(n){n.parent.Debugger.Log("MasterLayout:_AppBarProjectsClicked "+n.data)},n.prototype._InitializeToolbar=function(){if(this._toolbarControl.InitCallbacks({parent:this,data:null},this._ToolbarClicked,null),this._toolBarItemsData!=null){var n=this;$.each(this._toolBarItemsData.items,function(t,i){n._toolbarControl.AddItem(i.id,i.text,i.data,i.style)})}this.ShowToolBar(this._toolBarItemsData.logoUrl,this._toolBarItemsData.title,this._toolBarItemsData.titleLength,this._toolBarItemsData.backgroundColor)},n.prototype._InitializeAppbar=function(){if(this._appbarControl.InitCallbacks({parent:this,data:null},this._AppBarClicked,null),this._appBarItemsData!=null){var n=this;$.each(this._appBarItemsData,function(t,i){n._appbarControl.AddItem(i.id,i.text,i.data,i.style)})}},n.prototype._InitializeNotifications=function(){this._notifcationCenterControl.InitCallbacks(null,null,null)},n.prototype._InitializeAppbarUsers=function(){this._appbarUsersControl.InitCallbacks({parent:this,data:null},this._AppBarUsersClicked,null)},n.prototype._InitializeAppbarProjects=function(){this._appbarProjectsControl.InitCallbacks({parent:this,data:null},this._AppBarProjectsClicked,null)},n.prototype.ExecuteAction=function(n){this.Debugger.Log("MasterLayout:ExecuteAction "+n)},n.prototype.GetSetting=function(key){this.Debugger.Log("MasterLayout:GetSetting "+key);return eval("this._settingsData."+key)},n.prototype.GetQueryVariable=function(n){for(var u=window.location.search.substring(1),r=u.split("&"),i,t=0;t<r.length;t++)if(i=r[t].split("="),decodeURIComponent(i[0])==n)return decodeURIComponent(i[1]);this.Debugger.Log("Query variable "+n+" not found")},n.prototype.GetCompanyLogo=function(n){var i=n,t;i=i==undefined?"/Content/Reader/logos/10.png":"/Content/Reader/logos/"+i+".png",t="";switch(n){case"10":t="width:45px;height:45px;";break;case"20":t="width:140px;height:45px;";break;case"30":t="width:100px;height:45px;";break;case"40":t="width:220px;height:45px;";break;default:t="width:45px;height:45px;"}return{code:n,logoUrl:i,logoStyle:t}},n}()
